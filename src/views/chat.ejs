<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
      integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
      crossorigin="anonymous"
    >
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>ndjs-diplom</title>
  </head>
  <body>
    <main>
      <script src="/socket.io/socket.io.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
      <script>
        const roomName = location.pathname.split('/').pop();
        const socket = io.connect(`${location.hostname}:3000`, {
          query: `roomName=${roomName}`
        });

        console.log(socket);
    
        // const container = document.querySelector('#comments-container');
        // // const inputUsername = document.querySelector('#username');
        // const commentText = document.querySelector('#comment');
        // const addButton = document.querySelector('#add-comment');
    
        // const getTmp = (msg) => {
        //   return `
        //     <div class="my-4 list-group-item list-group-item-action">
        //       <div class="d-flex w-100 justify-content-between">
        //         <small>${msg.username}</small>
        //         <small class="text-muted">${msg.type}</small>
        //       </div>
        //       <p class="mb-1">${msg.text}</p>
        //     </div>
        //   `;
        // };
    
        // socket.on('message-to-room', (msg) => {
        //   const div = getTmp(msg)
        //   container.insertAdjacentHTML('beforeend', div)
          
        // });
    
        // addButton.addEventListener('click', () => {
        //   socket.emit('message-to-room', {
        //     // username: inputUsername.value,
        //     text: commentText.value,
        //   });
    
        //   commentText.value = "";
        // })
      </script>
      <!-- <header>
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <button class="navbar-toggler"
                    type="button"
                    data-toggle="collapse"
                    data-target="#navbarNav"
                    aria-controls="navbarNav"
                    aria-expanded="false"
                    aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse d-flex " id="navbarNav">
                <ul class="navbar-nav d-flex flex-grow-1 flex-row">
                    <li class="nav-item active d-flex">
                        <a class="nav-link" href="/">
                            Главная
                        </a>
                    </li>
                    <li class="nav-item d-flex">
                        <a class="nav-link" href="/books">
                            Книги
                        </a>
                    </li>
                    <% if (locals.user) { %>
                    <li class="nav-item ml-auto d-flex">
                        <a class="nav-link" href="/me">
                            Профиль
                        </a>
                    </li>
                    <% } else { %>
                    <li class="nav-item ml-auto d-flex">
                        <a class="nav-link" href="/login">
                            Вход
                        </a>
                    </li>
                    <% } %>
                </ul>
            </div>
        </nav>
      </header> -->
      <div class="container my-4">
        <div>chat <%= chatId %></div>
      </div>
    </main>
  </body>
</html>
